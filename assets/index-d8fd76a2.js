import{A as y,g as $,a as w}from"./date-62ac0f56.js";import{d as b,r as f,a as L,o as j,b as _,u as r,c as i,e as l,f as d,w as c,g as n,h as I,t as a,F as C,i as P,j as S,_ as v}from"./index-b7a3b536.js";const h=b("NewsListStore",()=>{const s=f([]);return{loading:f(!1),newsList:s}}),m=h(),q=async()=>{let s=[];try{s=(await(await fetch(`${y}/beststories.json?print=pretty`)).json()).slice(0,100)}catch(e){console.error("Error:",e)}return s},g=async()=>{const s=await q();try{m.loading=!0;const e=s.map(t=>fetch(`${y}/item/${t}.json?print=pretty`)),u=await Promise.all((await Promise.all(e)).map(t=>t.json()));m.newsList=u.map(t=>({id:t.id,date:$(t.time),title:t.title,rating:t.score,autor:t.by})).sort((t,p)=>w(p.date)-w(t.date))}catch(e){console.error("Error:",e)}finally{m.loading=!1}},D={key:0},E={class:"news-list"},H={class:"news-list__id"},R={class:"news-list__date"},V={class:"news-list__title"},A={class:"news-list__rating"},F={class:"news-list__autor"},M=L({__name:"index",setup(s){const e=h();return j(async()=>{e.newsList.length||(await g(),setInterval(async()=>{await g()},6e4))}),(u,t)=>{const p=_("Button"),x=_("Header"),N=_("RouterLink"),k=_("Loader");return r(e).newsList.length?(i(),l("section",D,[d(x,null,{title:c(()=>t[1]||(t[1]=[n("span",null,"News list:",-1)])),actions:c(()=>[d(p,{color:"blue",onClick:t[0]||(t[0]=o=>r(g)())},{default:c(()=>[I(a(r(e).loading?"update...":"update news"),1)]),_:1})]),_:1}),n("ul",E,[(i(!0),l(C,null,P(r(e).newsList,(o,B)=>(i(),l("li",{class:"news-list__item",key:o.id},[d(N,{to:`/news/${o.id}`},{default:c(()=>[n("div",H,a(B+1),1),n("div",R,a(o.date),1),n("div",V,a(o.title),1),n("div",A,a(o.rating),1),n("div",F,a(o.autor),1)]),_:2},1032,["to"])]))),128))])])):(i(),S(k,{key:1}))}}});const T=v(M,[["__scopeId","data-v-97758aa6"]]),U=L({__name:"index",setup(s){return(e,u)=>(i(),l("section",null,[d(r(T))]))}});const J=v(U,[["__scopeId","data-v-9d1ec6d6"]]);export{J as default};
